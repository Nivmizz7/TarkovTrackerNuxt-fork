# PR Review Log: feat/ui-improvements (origin/main...HEAD)

Legend: [NR]=not reviewed [OK]=good [FIX]=needs change [Q]=question [RISK]=needs follow-up

## Reviewed

- .claude-plugin/.claude-plugin/plugin.json [OK]
- .claude-plugin/.mcp.json [OK]
- .claude-plugin/README.md [OK]
- .claude-plugin/agents/tarkov-data-expert.md [OK]
- .claude-plugin/mcp/eft-wiki/package-lock.json [OK]
- .claude-plugin/mcp/eft-wiki/package.json [OK]
- .claude-plugin/mcp/eft-wiki/src/index.ts [OK]
- .claude-plugin/mcp/eft-wiki/tsconfig.json [OK]
- .claude-plugin/mcp/tarkov-dev/package-lock.json [OK]
- .claude-plugin/mcp/tarkov-dev/package.json [OK]
- .claude-plugin/mcp/tarkov-dev/src/index.ts [OK]
- .claude-plugin/mcp/tarkov-dev/tsconfig.json [OK]
- .claude-plugin/package.json [OK]
- .claude-plugin/skills/tarkov-data-patterns/SKILL.md [OK]
- .color-lint-baseline [OK]
- .husky/commit-msg [OK]
- .husky/pre-commit [OK]
- .releaserc.json [OK]
- AGENTS.md [OK]
- CLAUDE.md [OK]
- app/app.config.ts [OK]
- app.config.ts [OK: moved to app/app.config.ts]
- app/error.vue [OK]
- .github/labeler.yml [OK]
- .github/workflows/README.md [OK]
- .github/workflows/ci.yml [OK]
- .github/workflows/deploy.yml [OK]
- .github/workflows/pr-checks.yml [FIX: Lighthouse job missing server start; PR size calc only 30 files]
- .github/workflows/release.yml [OK]
- .github/workflows/security.yml [OK]
- .github/workflows/stale.yml [OK]
- app/features/tasks/TaskFilterBar.vue [OK]
- app/features/tasks/TaskSettingsDrawer.vue [FIX: i18n strings, focus/esc behavior]
- app/features/tasks/TaskCard.vue [OK]
- app/features/tasks/TaskCardActions.vue [OK]
- app/features/tasks/TaskCardBackground.vue [OK]
- app/features/tasks/TaskCardBadges.vue [FIX: pin aria labels]
- app/features/tasks/TaskCardHeader.vue [OK]
- app/features/tasks/TaskCardRewards.vue [OK]
- app/features/tasks/TaskActions.vue [OK]
- app/features/tasks/TaskObjective.vue [OK]
- app/features/tasks/TaskObjectiveItemGroup.vue [OK]
- app/features/tasks/TaskMapPanel.vue [OK]
- app/features/tasks/TaskLoadingState.vue [OK]
- app/features/tasks/QuestKeys.vue [OK]
- app/features/tasks/TaskInfo.vue [OK]
- app/features/tasks/TaskLink.vue [OK]
- app/features/tasks/SettingsToggle.vue [OK: removed]
- app/features/tasks/TaskSettingsModal.vue [OK: removed]
- app/features/tasks/ObjectiveCountControls.vue [OK]
- app/features/dashboard/DashboardTraderCard.vue [OK]
- app/features/dashboard/DashboardMilestoneCard.vue [OK]
- app/features/dashboard/DashboardProgressCard.vue [OK]
- app/features/dashboard/**tests**/DashboardProgressCard.test.ts [OK]
- app/features/tasks/**tests**/TaskFilterBar.test.ts [OK]
- app/composables/useTaskFiltering.ts [OK]
- app/composables/useTaskSettingsDrawer.ts [OK]
- app/composables/useSkillCalculation.ts [OK]
- app/composables/useCraftableItem.ts [OK]
- app/composables/useDashboardStats.ts [OK]
- app/composables/useItemDistribution.ts [RISK: reset/decrement leaves completion flags stale]
- app/composables/useLootGame.ts [OK]
- app/composables/**tests**/useDashboardStats.test.ts [OK]
- app/composables/**tests**/useHideoutFiltering.test.ts [OK]
- app/composables/**tests**/useSkillCalculation.test.ts [OK]
- app/stores/useMetadata.ts [RISK: scav karma task handling change, outdated comment]
- app/stores/usePreferences.ts [FIX: Supabase sync columns mismatch]
- app/stores/useProgress.ts [RISK: trader/fence gating depends on rep data]
- app/stores/useSystemStore.ts [OK]
- app/stores/useTeamStore.ts [OK]
- app/stores/useTarkov.ts [OK]
- app/utils/constants.ts [OK]
- app/utils/fuzzySearch.ts [OK]
- app/utils/**tests**/fuzzySearch.test.ts [OK]
- app/types/theme.ts [OK]
- app/types/tarkov.ts [OK]
- app/types/taskFilter.ts [OK]
- app/locales/en.json5 [OK]
- app/locales/de.json5 [OK]
- app/locales/es.json5 [OK]
- app/locales/fr.json5 [OK]
- app/locales/ru.json5 [OK]
- app/locales/uk.json5 [OK]
- app/locales/zh.json5 [OK]
- app/features/neededitems/NeededItemsFilterBar.vue [FIX: i18n strings, focus behavior]
- app/features/neededitems/NeededItemGroupedModal.vue [FIX: i18n strings, completion flags on decrement/reset]
- app/features/neededitems/NeededItemGroupedInputControls.vue [FIX: i18n strings, fractional input]
- app/features/neededitems/NeededItemGroupedCard.vue [FIX: i18n strings, keyboard access]
- app/features/neededitems/NeededItemMediumCard.vue [FIX: i18n for unknown text]
- app/features/neededitems/NeededItemRow.vue [FIX: i18n for unknown text]
- app/features/neededitems/NeededItemSmallCard.vue [OK]
- app/features/neededitems/NeededItem.vue [OK]
- app/features/neededitems/neededitem-keys.ts [OK]
- app/features/neededitems/RequirementInfo.vue [OK]
- app/features/neededitems/**tests**/NeededItemsFilterBar.test.ts [OK]
- app/pages/needed-items.vue [FIX: new i18n strings, grouped modal data flow]
- app/pages/neededitems.vue [FIX: card style not applied in grid]
- app/pages/tasks.vue [OK]
- app/pages/login.vue [FIX: redirect handling removed, i18n labels/keys]
- app/pages/auth/callback.vue [FIX: redirect handling removed]
- app/pages/oauth/consent.vue [OK]
- app/pages/privacy.vue [OK]
- app/pages/terms-of-service.vue [OK]
- app/pages/index.vue [FIX: unused _currentLevel]
- app/pages/**tests**/index.page.test.ts [OK]
- app/pages/**tests**/hideout.page.test.ts [OK]
- app/pages/**tests**/neededitems.page.test.ts [OK]
- app/pages/**tests**/settings.page.test.ts [OK]
- app/features/settings/InterfaceSettingsCard.vue [FIX: task view value, map zoom slider, i18n]
- app/features/settings/SkillsCard.vue [FIX: i18n strings]
- app/features/settings/ExperienceCard.vue [OK]
- app/features/settings/AccountDeletionCard.vue [OK]
- app/features/settings/ApiTokens.vue [OK]
- app/features/settings/DataMigrationCard.vue [OK]
- app/features/settings/DataPreviewCard.vue [OK]
- app/features/settings/DisplayNameCard.vue [OK: removed]
- app/features/settings/ImportConfirmDialog.vue [OK]
- app/features/settings/MigrationSteps.vue [OK]
- app/features/settings/**tests**/SkillsCard.test.ts [OK]
- app/pages/settings.vue [FIX: i18n strings, prestige labels]
- app/shell/AppBar.vue [OK]
- app/shell/AppFooter.vue [OK]
- app/shell/LoadingScreen.vue [FIX: top offset mismatches app bar height]
- app/shell/NavDrawer.vue [OK]
- app/layouts/default.vue [OK]
- app/features/drawer/DrawerGameSettings.vue [FIX: i18n strings]
- app/features/drawer/DrawerItem.vue [OK]
- app/features/drawer/DrawerItemIcon.vue [OK]
- app/features/drawer/DrawerLevel.vue [OK]
- app/features/drawer/DrawerLinks.vue [OK]
- app/components/HolidayLights.vue [OK]
- app/components/SelectMenuFixed.vue [OK]
- app/components/ui/BaseProgressBar.vue [OK]
- app/components/ui/ContextMenu.vue [OK]
- app/components/ui/ContextMenuItem.vue [OK]
- app/components/ui/GameItem.vue [FIX: non-theme colors]
- app/components/ui/GameModeSelector.vue [OK]
- app/components/ui/GenericCard.vue [OK]
- app/composables/useHideoutFiltering.ts [OK]
- app/composables/useHideoutStationStatus.ts [OK]
- app/features/hideout/HideoutCard.vue [FIX: collapse toggle a11y]
- app/features/hideout/HideoutRequirement.vue [OK]
- app/features/hideout/StationLink.vue [OK]
- app/pages/hideout.vue [FIX: collapse preference persistence]
- app/features/maps/LeafletMap.vue [OK]
- app/features/maps/MapMarker.vue [OK]
- app/features/team/MyTeam.vue [OK]
- app/features/team/TeamMemberCard.vue [OK]
- app/features/team/TeamOptions.vue [OK]
- app/features/admin/AdminAuditLog.vue [OK]
- app/features/admin/AdminCacheCard.vue [OK]
- app/assets/css/tailwind.css [OK]
- app/server/api/tarkov/hideout.get.ts [OK]
- app/server/utils/tarkov-queries.ts [OK]
- app/pages/traders.vue [OK: removed]
- app/features/traders/TraderCard.vue [OK: removed]
- commitlint.config.js [OK]
- docs/WORKFLOW_AUTOMATION.md [OK]
- docs/ui-improvement-plan.md [OK]
- nuxt.config.ts [OK]
- package.json [OK]
- package-lock.json [OK]
- renovate.json [OK]
- scripts/setup-dev-environment.sh [OK]
- scripts/lint-colors.mjs [OK]
- scripts/migrate-colors.mjs [OK]
- public/img/\*\* [OK]
- supabase/functions/\_shared/database.types.ts [FIX: Supabase sync columns mismatch]
- supabase/migrations/20260125120000_add_user_preferences_filters.sql [FIX: Supabase sync columns mismatch]
- test-setup.ts [OK]
- vitest.config.ts [OK]

## Findings

- High: Hard-coded user-facing strings in `app/features/tasks/TaskSettingsDrawer.vue` (needs i18n + locale updates).
- High: Preferences sync includes `show_available_filter` + `show_locked_filter` but DB types/migration do not add these columns; Supabase writes will fail or drop fields. (`app/stores/usePreferences.ts`, `supabase/functions/_shared/database.types.ts`, `supabase/migrations/20260125120000_add_user_preferences_filters.sql`)
- High: Grouped modal decrement/reset updates counts without uncompleting objectives/parts; completion flags can stay true while counts drop. (`app/features/neededitems/NeededItemGroupedModal.vue`, `app/composables/useItemDistribution.ts`)
- Medium: Drawer lacks focus trap/esc/overlay close parity with prior modal (`app/features/tasks/TaskSettingsDrawer.vue`).
- Medium: Pin button aria labels are hard-coded (missing i18n). (`app/features/tasks/TaskCardBadges.vue`)
- Medium: Scav karma task exclusion removed, but `processTasksData` comment still claims filtering; confirm intended behavior and update comment. (`app/stores/useMetadata.ts`)
- Medium: Login flow no longer preserves `?redirect=` return path; both login popup and callback always navigate to `/`. (`app/pages/login.vue`, `app/pages/auth/callback.vue`)
- Medium: Login popup error toasts use missing i18n keys (`page.login.error_title`, `page.login.error_description`), and popup-blocked strings only exist in `en.json5` (missing in other locales). (`app/pages/login.vue`, `app/locales/*.json5`)
- Medium: Login buttons use hard-coded `aria-label` strings (“Continue with …”, “Login options”) instead of i18n. (`app/pages/login.vue`)
- Medium: New needed-items UI contains many hard-coded user-facing strings (filters, modal labels, tooltips, unknown fallbacks, aria labels). (`app/features/neededitems/NeededItemsFilterBar.vue`, `app/features/neededitems/NeededItemGroupedModal.vue`, `app/features/neededitems/NeededItemGroupedInputControls.vue`, `app/features/neededitems/NeededItemGroupedCard.vue`, `app/features/neededitems/NeededItemMediumCard.vue`, `app/features/neededitems/NeededItemRow.vue`)
- Medium: Grouped card is clickable via `div` only (no keyboard/aria role). (`app/features/neededitems/NeededItemGroupedCard.vue`)
- Medium: FIR/Non-FIR input controls accept fractional values; distribution can write non-integer counts. (`app/features/neededitems/NeededItemGroupedInputControls.vue`, `app/composables/useItemDistribution.ts`)
- Medium: Interface settings task default view uses value `map` instead of `maps`, so selecting Map view won’t persist correctly. (`app/features/settings/InterfaceSettingsCard.vue`)
- Medium: Map zoom slider uses `v-model` (string) with a numeric setter; non-number input resets zoom speed to 1, so the slider may not work. (`app/features/settings/InterfaceSettingsCard.vue`, `app/stores/usePreferences.ts`)
- Medium: Skills UI uses hard-coded strings (tooltips, badge labels, “ELITE Level”, toast copy). (`app/features/settings/SkillsCard.vue`)
- Medium: Loading screen uses `top-16` after app bar height dropped to `h-11`, leaving a gap. (`app/shell/LoadingScreen.vue`, `app/shell/AppBar.vue`)
- Medium: Drawer game settings use hard-coded labels/aria text (“PvP”, “PvE”, “Toggle game mode”, “Select faction”). (`app/features/drawer/DrawerGameSettings.vue`)
- Medium: Hideout collapse preference is not persisted (state added but not in getters/actions/persist/supabase). (`app/stores/usePreferences.ts`, `app/pages/hideout.vue`)
- Medium: Hideout card collapse toggle is icon-only without aria-label. (`app/features/hideout/HideoutCard.vue`)
- Medium: Lighthouse PR check hits `http://localhost:3000` without starting a server, so the job will fail when enabled. (`.github/workflows/pr-checks.yml`)
- Low: New preferences fields (needed-items sort/hide-owned/card-style, pinned tasks, skill sort mode, task filter presets) are not synced to Supabase; confirm if local-only is intended. (`app/stores/usePreferences.ts`, `supabase/functions/_shared/database.types.ts`)
- Low: New gating logic (Fence rep + trader unlock tasks) lacks unit tests for `unlockedTasks` behavior and pinned-task sorting lacks tests. (`app/stores/useProgress.ts`, `app/composables/useTaskFiltering.ts`)
- Low: Filter bar auto-focus on window focus/pointerup may steal focus from other controls. (`app/features/neededitems/NeededItemsFilterBar.vue`)
- Low: Settings prestige option labels are hard-coded (not localized). (`app/pages/settings.vue`)
- Low: Card style toggle doesn’t apply on legacy `/neededitems` route (prop not forwarded). (`app/pages/neededitems.vue`)
- Low: GameItem uses raw HSL values instead of theme tokens for background classes. (`app/components/ui/GameItem.vue`)
- Low: PR size labeling only sums the first page of changed files (30 max), so labels are wrong on larger PRs. (`.github/workflows/pr-checks.yml`)
- Low: Unused `_currentLevel` computed will trip lint/no-unused-vars in `app/pages/index.vue`.

## Backlog (suggested slices)

- Core logic: app/stores/, app/composables/, app/utils/, app/server/
- Tasks feature: app/features/tasks/, app/pages/tasks.vue (beyond files above)
- Needed items: app/features/neededitems/, app/pages/needed-items.vue
- Settings: app/features/settings/, app/pages/settings.vue
- Shell/UI: app/components/, app/shell/, app/layouts/
- Tests/locales/assets: app/\*\*/**tests**/, app/locales/, public/
- Tooling/CI: .github/, scripts/, package.json
